/**
 * Image Store - Admin pricing script 
 *
 * @file pricing.js
 * @package Image Store
 * @author Hafid Trujillo
 * @copyright 20010-2013
 * @filesource  wp-content/plugins/image-store/_js/pricing.js
 * @since 3.2.1
 */
 
jQuery(document).ready(function(e){if(jQuery().datepicker){e("#starts").datepicker({altField:"#start_date",altFormat:"yy-mm-dd",dateFormat:imslocal.dateformat});e("#expires").datepicker({altFormat:"yy-mm-dd",altField:"#expiration_date",dateFormat:imslocal.dateformat})}e(".ims-box.pricing .postbox .handlediv").live("click",function(){e(this).siblings(".inside").toggle()});e("#promo_type").change(function(){if(e(this).val()==3)e('input[name="discount"]').attr({disabled:"disabled"});else e('input[name="discount"]').removeAttr("disabled")});e("#price-list-box input.downloadable").live("click",function(){if(e(this).is(":checked"))e(this).parents("tr.size").find("td").eq(1).append("<em>"+imslocal.download+"</em>");else e(this).parents("tr.size").find("td").eq(1).find("em").remove()});e(".itemtop a").toggle(function(){e(this).html("[-]");table=e(this).parents(".ims-table");table.find(".content").show()},function(){e(this).html("[+]");table=e(this).parents(".ims-table");table.find(".content").hide()});e("td.x").live("click",function(){parent=e(this).parents("tbody");if(parent.find("tr.row").length<=1)parent.find("tr.filler").show();e(this).parent().remove()});e("#price-list .trash").live("click",function(){if(!confirm(imslocal.deletelist))return false;id=e(this).parent().find(".listid").val();e.get(imslocal.imsajax,{postid:id,action:"deletelist",_wpnonce:imslocal.nonceajax},function(){e(" #ims-list-"+id).remove()});return false});e("#packages .trash").live("click",function(){if(!confirm(imslocal.deletepackage))return false;id=e(this).parent().find(".packageid").val();e.get(imslocal.imsajax,{postid:id,action:"deletepackage",_wpnonce:imslocal.nonceajax},function(){e("#package-list-"+id).remove()});return false});e(".addimagesize,.addfinish,.addcoloropt,.addshipping,.addcolorfilter").live("click",function(){parent=e(this).parents(".postbox");i=parent.find(".row").length;row=parent.find(".copyrow");type=row.attr("title");clone=row.clone().removeAttr("title").removeClass("copyrow").addClass(" row");clone.find("input.name").attr("name",type+"["+i+"][name]");clone.find("input.price").attr("name",type+"["+i+"][price]");clone.find("input.width").attr("name",type+"["+i+"][w]");clone.find("input.height").attr("name",type+"["+i+"][h]");clone.find("select.unit").attr("name",type+"["+i+"][unit]");clone.find("input.code").attr("name",type+"["+i+"][code]");clone.find("select.type").attr("name",type+"["+i+"][type]");clone.find("input.colorize").attr("name",type+"["+i+"][colorize]");clone.find("input.contrast").attr("name",type+"["+i+"][contrast]");clone.find("input.grayscale").attr("name",type+"["+i+"][grayscale]");clone.find("input.brightness").attr("name",type+"["+i+"][brightness]");row.before(clone);return false});if(jQuery().sortable){e(".price-list tbody.sizes,"+".price-list tbody.colors,"+".package-list tbody.packages,"+".price-list tbody.finishes").each(function(){e(this).sortable({axis:"y",cursor:"move",helper:"clone",containment:this,items:"tr:not(.header)",placeholder:"widget-placeholder",stop:function(t,n){i=0;e(this).find(".filler").hide();type=e(this).attr("class").split(" ")[0];e(this).find(".row").each(function(){e(this).find(".unit").attr("name",type+"["+i+"][unit]");e(this).find("input.id").attr("name",type+"["+i+"][ID]");e(this).find("input.code").attr("name",type+"["+i+"][code]");e(this).find("input.name").attr("name",type+"["+i+"][name]");e(this).find("input.price").attr("name",type+"["+i+"][price]");e(this).find("select.type").attr("name",type+"["+i+"][type]");e(this).find("input.count").attr("name",type+"["+i+"][count]");e(this).find("input.downloadable").attr("name",type+"["+i+"][download]");i++})}})})}if(jQuery().draggable){e("#price-list .finish").draggable({helper:"clone",revert:"invalid",connectToSortable:"#price-list-box .finishes"});e("#color_options .color").draggable({helper:"clone",revert:"invalid",connectToSortable:"#price-list-box .colors"});e("#price-list .sizes-list .size, #price-list-package .packages").draggable({helper:"clone",revert:"invalid",connectToSortable:".price-list .sizes"});e("#packages .sizes-list .size").draggable({helper:"clone",revert:"invalid",connectToSortable:".package-list .packages"})}e(".ims-table tbody.content").each(function(){if(e(this).find(".row").length<=0){e(this).find("tr.filler").show()}});e(".ims-box .content").hide();e("#color_options .inside").hide();e("#print-finishes-box .inside").hide()})